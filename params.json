{"name":"steamworks4j","tagline":"A thin Java wrapper to access the Steamworks API","body":"# steamworks4j\r\n\r\nA thin wrapper which allows Java applications to access the Steamworks C++ API. It can be easily integrated with other frameworks, such as [libGDX](http://libgdx.badlogicgames.com/).\r\n\r\n## Getting started\r\n\r\nYou'll notice that this library is documented very scarcely. That's a deliberate choice. I assume that you are a **registered Steam developer** and have access to the Steamworks documentation.\r\n\r\nPlease refer to the official documentation to learn about the steps needed to prepare your application for use with Steam. Here's a very brief checklist:\r\n\r\n- You need a properly configured SteamApp depot, e.g. you should be able to upload to and run a development build from Steam.\r\n- The Steam client must be running.\r\n- A steam_appid.txt needs to be present in the working directory.\r\n\r\n## Maven releases\r\n\r\nI plan to release major updates of **steamworks4j** on Maven Central. Please refer to the build instructions [below](#building-the-java-package) if you want to use features which are not deployed yet.\r\n\r\nMaven:\r\n\r\n```\r\n<dependency>\r\n  <groupId>com.code-disaster.steamworks4j</groupId>\r\n  <artifactId>steamworks4j</artifactId>\r\n  <version>1.1.0</version>\r\n</dependency>\r\n```\r\n\r\nGradle:\r\n\r\n```\r\ndependencies {\r\n\tcompile \"com.code-disaster.steamworks4j:steamworks4j:1.1.0\"\r\n}\r\n```\r\n\r\n## Introduction\r\n\r\nThe wrapper is written as minimal as possible without sacrificing ease of use. Its goal is to provide *just* an accessible Java API to Valve's C++ interfaces.\r\n\r\n> **In its current state, the wrapper only publishes *some* interfaces. Most of them do not expose the full API. In basic, I've added everything we need for our own games, plus what I've been asked to. Feel free to send requests, or even better, participate to add the functions and interfaces still missing.**\r\n\r\n**steamworks4j** is currently compiled with Steamworks SDK v1.33b.\r\n\r\nThis project is released under the MIT license. The **steamworks4j** package does not contain any source/header files owned by Valve. The only files included from the Steamworks SDK are the redistributable steam_api runtime libraries to accompany the prebuilt native libraries.\r\n\r\n## Implementation overview\r\n\r\n### Technical concept\r\n\r\nThe *public* Java interfaces are more or less 1:1 mapped to their native counterparts, as long as it doesn't impede usability and type safety. In general, each public function does simple type conversion only, before calling its native function.\r\n\r\nCallbacks are dealt with in a similar manner. Native callbacks are received by *package private callback adapters*, which only do type conversion, then forward the callback to their *public* interface.\r\n\r\n### Native resources\r\n\r\nJava interfaces may allocate some native heap memory. To clean up those resources, call SteamInterface.dispose() to avoid memory leaks.\r\n\r\n### Proper handling of callbacks\r\n\r\nThe Steamworks API provides two different mechanics to deal with callbacks: `STEAM_CALLBACK()` and `CCallResult<>`. Both are handled internally by **steamworks4j** for you, but this abstraction imposes one drawback:\r\n\r\n> It is only guaranteed that, at any time, each instance of an interface only receives callbacks related to the **latest** respective API call.\r\n\r\n> In practice this means that the caller shouldn't \"batch-execute\" the same API function, then wait for a bunch of callbacks. Instead, only one single API call should be issued. Then the interface should wait for the callback, process it, then execute the next API call.\r\n\r\n> If you really want to execute functions which trigger callbacks in parallel, you have to create and maintain multiple instances of the same interface.\r\n\r\n> This is actually true for CCallResult<> style callbacks only, but the application will require more knowledge about the inner workings of Steamworks to differentiate, as the Java API doesn't tell.\r\n\r\n### Implemented interfaces\r\n\r\nThe following interfaces have been *partially* implemented so far:\r\n\r\n```\r\nISteamApps\r\nISteamFriends\r\n[*] ISteamGameServer\r\n[*] ISteamGameServerStats\r\nISteamNetworking\r\nISteamRemoteStorage (cloud saves, workshop files)\r\nISteamUGC\r\nISteamUser\r\nISteamUserStats (user stats, achievements, leaderboards)\r\nISteamUtils\r\n\r\n[*] The game server wrappers are not tested at all, so expect issues using them.\r\n```\r\n\r\n## Requirements\r\n\r\nFirst of all, you need to be registered with, and have a project set up at Steamworks to use this wrapper.\r\n\r\n### Technical requirements\r\n\r\n#### Java\r\n\r\nThe Java code is compatible to Java 6.\r\n\r\n#### Mac OS\r\n\r\nOS X 10.6 and above is supported.\r\n\r\n## Sample application\r\n\r\nThe `com.codedisaster.steamworks.test.*` package contains some test applications which show basic usage of some of the Java interfaces.\r\n\r\n## Debugging\r\n\r\nFor development you need to add a text file *steam_appid.txt* to the working directory, which just contains the appID of your Steam application.\r\n\r\n## Building the Java package\r\n\r\nJust use Maven to `mvn package` in the root directory to compile a jar ready to be used in your application, or `mvn install` to deploy it to your local Maven cache.\r\n\r\nRun `mvn package -P with-dependencies` to compile an additional jar with dependencies ([jnigen](https://github.com/libgdx/libgdx/wiki/jnigen)) included.\r\n\r\n## Building native libraries\r\n\r\n### Prebuilt native libraries\r\n\r\nBuilding the native libraries yourself isn't required if you don't plan to *modify* the native code part of the wrapper. There are prebuilt versions located in the *steamworks4j/natives/libs/* folder. The Maven build packs them all into *steamworks4j-natives.jar* which is then bundled with the primary JAR file.\r\n\r\n### Dependencies\r\n\r\nTo build the native libraries, download the latest Steamworks SDK. Unzip and copy the following folders into the **steamworks4j** root directory:\r\n\r\n- *steamworks4j/*\r\n    - *sdk/*\r\n        - *public/*\r\n        - *redistributable_bin/*\r\n\r\n[jnigen](https://github.com/libgdx/libgdx/wiki/jnigen) is used to generate parts of the native code, and [premake4/5](http://industriousone.com/premake) to compile native code into dynamic libraries.\r\n\r\n### Build environments\r\n\r\n- Windows\r\n\r\n  - The **Visual Studio 2013** command line environment must be available. It's sufficient to use the Community or Express editions. The default location for the batch file to setup the build environment is *c:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\vcvarsall.bat*\r\n  - **premake5.exe** must be available in the path, e.g. in the *steamworks4j/build-natives/* folder.\r\n\r\n- Linux\r\n\r\n  - **GCC** must be installed in a fairly recent version with C++11 support.\r\n  - **premake4** needs to be installed. It should be available through your favorite package manager, e.g. per *apt-get install premake4*.\r\n\r\n- Mac OS\r\n\r\n  - **XCode** must be installed.\r\n  - **premake4** needs to be available. One possible option is to install it as a **Mac Ports** package.\r\n\r\n### Build steps\r\n\r\nThe first step is to let [jnigen](https://github.com/libgdx/libgdx/wiki/jnigen) generate C++ source files for the embedded JNI functions. The `com.codedisaster.steamworks.jnigen.JNICodeGenerator` class contains the code to do that.\r\n\r\n- The working directory must be the *steamworks4j/java-wrapper/* folder.\r\n- Simply run `java -jar /path/to/steamworks4j-${version}-jar-with-dependencies.jar`. This will run the JNICodeGenerator.main() application.\r\n- You can just run this as a plain Java application from inside your favorite IDE. No arguments are required.\r\n- The generated code is written to *steamworks4j/java-wrapper/src/main/native/*.\r\n\r\nIf everything is setup correctly, you now only need to run the right `build-[osx|linux|win].[sh|bat]` shell script in the *steamworks4j/build-natives/* folder to compile and link the native libraries on each target platform.\r\n\r\nIn case of errors you should be able to open the workspace/project files created by **premake4/5** in their respective IDE for troubleshooting.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}